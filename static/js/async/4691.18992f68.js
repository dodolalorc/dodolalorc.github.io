"use strict";(self.webpackChunkblogsite_rspress=self.webpackChunkblogsite_rspress||[]).push([["4691"],{648:function(s,e,n){n.r(e),n.d(e,{default:()=>c});var a=n(2676),l=n(453),i=n(3208);function t(s){let e=Object.assign({p:"p",strong:"strong",h3:"h3",a:"a",ul:"ul",li:"li",input:"input",h2:"h2",span:"span",math:"math",semantics:"semantics",mrow:"mrow",msub:"msub",mi:"mi",mn:"mn",mo:"mo",annotation:"annotation",h4:"h4",msup:"msup",pre:"pre",code:"code",ol:"ol"},(0,l.ah)(),s.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.p,{children:'{{< admonition abstract "前言" true>}}'}),"\n",(0,a.jsx)(e.p,{children:"痛定思痛练习线段树QAQ。"}),"\n",(0,a.jsx)(e.p,{children:"{{< /admonition >}}"}),"\n",(0,a.jsxs)(e.p,{children:["此篇包含尚未写完的题，事实上是一个",(0,a.jsx)(e.strong,{children:"TODO List"}),"。"]}),"\n",(0,a.jsxs)(e.h3,{id:"todo-list",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#todo-list",children:"#"}),"TODO List"]}),"\n",(0,a.jsx)(i.Z,{defaultLocale:"zh-CN"}),"\n",(0,a.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,a.jsxs)(e.li,{className:"task-list-item",children:[(0,a.jsx)(e.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,a.jsx)(e.a,{href:"https://acm.hdu.edu.cn/showproblem.php?pid=1542",rel:"noopener noreferrer",target:"_blank",children:"Atlantis"})]}),"\n",(0,a.jsxs)(e.li,{className:"task-list-item",children:[(0,a.jsx)(e.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,a.jsx)(e.a,{href:"https://www.luogu.com.cn/problem/P5490",rel:"noopener noreferrer",target:"_blank",children:"P5490 【模板】扫描线 & 矩形面积并 - 洛谷 | 计算机科学教育新生态 (luogu.com.cn)"})]}),"\n",(0,a.jsxs)(e.li,{className:"task-list-item",children:[(0,a.jsx)(e.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,a.jsx)(e.a,{href:"https://acm.hdu.edu.cn/showproblem.php?pid=1754",rel:"noopener noreferrer",target:"_blank",children:"I Hate It"})]}),"\n",(0,a.jsxs)(e.li,{className:"task-list-item",children:[(0,a.jsx)(e.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,a.jsx)(e.a,{href:"https://acm.hdu.edu.cn/showproblem.php?pid=1255",rel:"noopener noreferrer",target:"_blank",children:"覆盖的面积"})]}),"\n",(0,a.jsxs)(e.li,{className:"task-list-item",children:[(0,a.jsx)(e.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,a.jsx)(e.a,{href:"https://acm.hdu.edu.cn/showproblem.php?pid=1166",rel:"noopener noreferrer",target:"_blank",children:"敌兵布阵"})]}),"\n",(0,a.jsxs)(e.li,{className:"task-list-item",children:[(0,a.jsx)(e.input,{type:"checkbox",disabled:!0})," ",(0,a.jsx)(e.a,{href:"https://www.luogu.com.cn/problem/P4588",rel:"noopener noreferrer",target:"_blank",children:"P4588 TJOI2018 数学计算 - 洛谷 | 计算机科学教育新生态 (luogu.com.cn)"})]}),"\n",(0,a.jsxs)(e.li,{className:"task-list-item",children:[(0,a.jsx)(e.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,a.jsx)(e.a,{href:"https://acm.hdu.edu.cn/showproblem.php?pid=7463",rel:"noopener noreferrer",target:"_blank",children:"单峰数列"})," ✅ 2024-09-26"]}),"\n",(0,a.jsxs)(e.li,{className:"task-list-item",children:[(0,a.jsx)(e.input,{type:"checkbox",disabled:!0})," ",(0,a.jsx)(e.a,{href:"https://acm.hdu.edu.cn/showproblem.php?pid=7530",rel:"noopener noreferrer",target:"_blank",children:"树上询问"})]}),"\n",(0,a.jsxs)(e.li,{className:"task-list-item",children:[(0,a.jsx)(e.input,{type:"checkbox",disabled:!0})," ",(0,a.jsx)(e.a,{href:"https://www.luogu.com.cn/problem/P1502",rel:"noopener noreferrer",target:"_blank",children:"P1502 窗口的星星 - 洛谷 | 计算机科学教育新生态 (luogu.com.cn)"})]}),"\n",(0,a.jsxs)(e.li,{className:"task-list-item",children:[(0,a.jsx)(e.input,{type:"checkbox",disabled:!0})," ",(0,a.jsx)(e.a,{href:"https://www.luogu.com.cn/problem/P2471",rel:"noopener noreferrer",target:"_blank",children:"P2471 SCOI2007 降雨量 - 洛谷 | 计算机科学教育新生态 (luogu.com.cn)"})]}),"\n"]}),"\n",(0,a.jsxs)(e.h2,{id:"atlantis--p5490-扫描线矩形面积并",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#atlantis--p5490-扫描线矩形面积并",children:"#"}),"Atlantis & P5490 扫描线矩形面积并"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:"https://acm.hdu.edu.cn/showproblem.php?pid=1542",rel:"noopener noreferrer",target:"_blank",children:"Problem - 1542 (hdu.edu.cn)"})}),"\n",(0,a.jsxs)(e.h3,{id:"题意",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#题意",children:"#"}),"题意"]}),"\n",(0,a.jsxs)(e.p,{children:["给出",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mn,{children:"1"})]}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"y"}),(0,a.jsx)(e.mn,{children:"1"})]}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mn,{children:"2"})]}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"y"}),(0,a.jsx)(e.mn,{children:"2"})]})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"x_1,y_1,x_2,y_2"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"1"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"1"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"2"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"2"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]})]})})]}),"，标志平面内的矩形的左上角坐标",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mn,{children:"1"})]}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"y"}),(0,a.jsx)(e.mn,{children:"1"})]}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"(x_1,y_1)"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"1"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"1"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mclose",children:")"})]})})]}),"和右下角坐标",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mn,{children:"2"})]}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"y"}),(0,a.jsx)(e.mn,{children:"2"})]}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"(x_2,y_2)"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"2"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"2"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mclose",children:")"})]})})]}),"​​，求这些矩形覆盖的总面积。"]}),"\n",(0,a.jsx)(e.p,{children:"输出格式参照样例。"}),"\n",(0,a.jsxs)(e.h4,{id:"数据范围",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#数据范围",children:"#"}),"数据范围"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mn,{children:"0"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsx)(e.mi,{children:"n"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsx)(e.mn,{children:"100"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"0\\leq n\\leq 100"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord",children:"0"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"n"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"100"})]})]})]})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mn,{children:"0"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mn,{children:"1"})]}),(0,a.jsx)(e.mo,{children:"<"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mn,{children:"2"})]}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsxs)(e.msup,{children:[(0,a.jsx)(e.mn,{children:"10"}),(0,a.jsx)(e.mn,{children:"5"})]})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"0\\leq x_1\\lt x_2\\leq 10^5"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord",children:"0"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6891em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"1"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"<"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.786em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"2"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8141em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord",children:"0"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,a.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"5"})})]})})})})})]})]})]})]})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mn,{children:"0"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"y"}),(0,a.jsx)(e.mn,{children:"1"})]}),(0,a.jsx)(e.mo,{children:"<"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"y"}),(0,a.jsx)(e.mn,{children:"2"})]}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsxs)(e.msup,{children:[(0,a.jsx)(e.mn,{children:"10"}),(0,a.jsx)(e.mn,{children:"5"})]})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"0\\leq y_1\\lt y_2\\leq 10^5"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord",children:"0"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7335em",verticalAlign:"-0.1944em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"1"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"<"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8304em",verticalAlign:"-0.1944em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"2"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8141em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord",children:"0"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,a.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"5"})})]})})})})})]})]})]})]})}),"\n"]}),"\n",(0,a.jsxs)(e.h3,{id:"思路",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#思路",children:"#"}),"思路"]}),"\n",(0,a.jsxs)(e.p,{children:["记录每个矩阵的上下边，并给下边沿标记",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mn,{children:"1"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"1"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"})]})})]}),"，上边沿标记",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{children:"−"}),(0,a.jsx)(e.mn,{children:"1"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"-1"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(e.span,{className:"mord",children:"−"}),(0,a.jsx)(e.span,{className:"mord",children:"1"})]})})]}),"，扫描线从下向上扫描。"]}),"\n",(0,a.jsxs)(e.p,{children:["记录每条线的左右端点的",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"x"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"x"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"})]})})]}),"坐标，去重后进行离散化，用",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"X"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"X[]"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mclose",children:"]"})]})})]}),"数组记录出现过的",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"x"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"x"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"})]})})]}),"坐标，并做去重。"]}),"\n",(0,a.jsxs)(e.p,{children:["在去重之后的",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"X"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"X[]"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mclose",children:"]"})]})})]}),"数组上建立线段树（不包含最右侧端点），线段树中的每个节点记录该段节点代表的线段的左右端点在",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"X"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"X[]"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mclose",children:"]"})]})})]}),"中的下标，之后若该线段被覆盖，该节点代表的长度就是",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"X"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mi,{children:"p"}),(0,a.jsx)(e.mi,{children:"o"}),(0,a.jsx)(e.mi,{children:"s"}),(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mo,{children:"+"}),(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"}),(0,a.jsx)(e.mo,{children:"−"}),(0,a.jsx)(e.mi,{children:"X"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mi,{children:"p"}),(0,a.jsx)(e.mi,{children:"o"}),(0,a.jsx)(e.mi,{children:"s"}),(0,a.jsx)(e.mi,{children:"l"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"X[posr+1]- X[posl]"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"p"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"osr"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"+"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsx)(e.span,{className:"mclose",children:"]"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"−"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"p"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"os"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(e.span,{className:"mclose",children:"]"})]})]})]}),"，初始时每个节点记录的长度都是",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mn,{children:"0"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"0"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"0"})]})})]}),"（初始时均未被覆盖）。"]}),"\n",(0,a.jsxs)(e.p,{children:["扫描线从下到上扫描，每次都是先遇到某个矩阵的下边沿（标记为",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mn,{children:"1"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"1"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"})]})})]}),"的边），然后再遇到上边沿（标记为",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{children:"−"}),(0,a.jsx)(e.mn,{children:"1"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"-1"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(e.span,{className:"mord",children:"−"}),(0,a.jsx)(e.span,{className:"mord",children:"1"})]})})]}),"的边）。对于每次加边，更新线段树上的节点，当前被覆盖的长度",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mo,{children:"\xd7"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\times"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(e.span,{className:"mord",children:"\xd7"})]})})]}),"当前扫描线与下一条扫描线的高度差即为这一部分的面积。"]}),"\n",(0,a.jsxs)(e.h3,{id:"代码",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#代码",children:"#"}),"代码"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-cpp",children:'#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef double ld;\nconst int maxn = 2050;\n\nstruct line {\n    int typ;\n    double s, t, y;\n    bool operator<(const line& l)const {\n        return y < l.y; // 按照横坐标升序排序\n    }\n}line[maxn * 2];\n\nstruct node {\n    int l, r;\n    int cnt;\n    double len;\n}tree[maxn * 4];\n\ndouble X[maxn * 2];\n\nvoid build(int p, int l, int r) {\n    tree[p] = { l,r,0,0 };\n    if (l == r)return;\n    int mid = l + (r - l) / 2;\n    build(p * 2, l, mid);\n    build(p * 2 + 1, mid + 1, r);\n}\n\nvoid pushup(int p) {\n    int l = tree[p].l, r = tree[p].r;\n    if (tree[p].cnt) { // 有覆盖\n        tree[p].len = X[r + 1] - X[l];\n    }\n    else {\n        tree[p].len = tree[p * 2].len + tree[p * 2 + 1].len;\n    }\n}\n\nvoid editTree(int p, double l, double r, int c) {\n    // 要修改的x区间:[l,r]\n    int pl = tree[p].l, pr = tree[p].r; // 当前节点对应的左右坐标\n    if (X[pl] >= l && X[pr + 1] <= r) { // 包含\n        tree[p].cnt += c;\n        pushup(p);\n        return;\n    }\n    if (l >= X[pr + 1] || r <= X[pl])\n        return;\n    editTree(p * 2, l, r, c);\n    editTree(p * 2 + 1, l, r, c);\n    pushup(p);\n}\n\nint n;\nint cas;\nvoid solve() {\n    cout << "Test case #" << ++cas << "\\n";\n    set<double>Xs;\n    for (int i = 1;i <= n;i++) {\n        double x1, y1, x2, y2;\n        cin >> x1 >> y1 >> x2 >> y2;\n        line[i] = { 1,x1,x2,y1 }; // 下边\n        line[i + n] = { -1,x1,x2,y2 }; // 上边\n        Xs.insert(x1), Xs.insert(x2); // 离散化\n    }\n    sort(line + 1, line + 1 + 2 * n);\n    int t = 0;\n    for (auto p : Xs) {\n        X[++t] = p;\n    }\n    build(1, 1, t - 1); // 对离散化的X轴建树\n    double ans = 0.0;\n    for (int i = 1;i < 2 * n;i++) { // 最后一条扫描线不用计入统计\n        editTree(1, line[i].s, line[i].t, line[i].typ);\n        ans += tree[1].len * (line[i + 1].y - line[i].y);\n    }\n\n    cout << "Total explored area: " << fixed << setprecision(2) << ans << "\\n";\n}\n\nint main() {\n    // ios::sync_with_stdio(false);\n    // cin.tie(0);\n    while (cin >> n && n)\n        solve();\n\n    return 0;\n}\n'})}),"\n",(0,a.jsxs)(e.p,{children:["稍微修改一下上一题的代码就能过这个题：",(0,a.jsx)(e.a,{href:"https://www.luogu.com.cn/problem/P5490",rel:"noopener noreferrer",target:"_blank",children:"P5490 【模板】扫描线 & 矩形面积并 - 洛谷 | 计算机科学教育新生态 (luogu.com.cn)"})]}),"\n",(0,a.jsx)(e.p,{children:"代码："}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-cpp",children:'#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef double ld;\nconst int maxn = 1e6 + 50;\n\nstruct line {\n    int typ;\n    ll s, t, y;\n    bool operator<(const line& l)const {\n        return y < l.y; // 按照横坐标升序排序\n    }\n}line[maxn * 2];\n\nstruct node {\n    int l, r;\n    int cnt;\n    ll len;\n}tree[maxn * 4];\n\nll X[maxn * 2];\n\nvoid build(int p, int l, int r) {\n    tree[p] = { l,r,0,0 };\n    if (l == r)return;\n    int mid = l + (r - l) / 2;\n    build(p * 2, l, mid);\n    build(p * 2 + 1, mid + 1, r);\n}\n\nvoid pushup(int p) {\n    int l = tree[p].l, r = tree[p].r;\n    if (tree[p].cnt) { // 有覆盖\n        tree[p].len = X[r + 1] - X[l];\n    }\n    else {\n        tree[p].len = tree[p * 2].len + tree[p * 2 + 1].len;\n    }\n}\n\nvoid editTree(int p, ll l, ll r, int c) {\n    // 要修改的x区间:[l,r]\n    int pl = tree[p].l, pr = tree[p].r; // 当前节点对应的左右坐标\n    if (X[pl] >= l && X[pr + 1] <= r) { // 包含\n        tree[p].cnt += c;\n        pushup(p);\n        return;\n    }\n    if (l >= X[pr + 1] || r <= X[pl])\n        return;\n    editTree(p * 2, l, r, c);\n    editTree(p * 2 + 1, l, r, c);\n    pushup(p);\n}\n\n\nvoid solve() {\n    int n;cin >> n;\n    set<ll>Xs;\n    for (int i = 1;i <= n;i++) {\n        ll x1, y1, x2, y2;\n        cin >> x1 >> y1 >> x2 >> y2;\n        line[i] = { 1,x1,x2,y1 }; // 下边\n        line[i + n] = { -1,x1,x2,y2 }; // 上边\n        Xs.insert(x1), Xs.insert(x2); // 离散化\n    }\n    sort(line + 1, line + 1 + 2 * n);\n    int t = 0;\n    for (auto p : Xs) {\n        X[++t] = p;\n    }\n    build(1, 1, t - 1); // 对离散化的X轴建树\n    ll ans = 0ll;\n    for (int i = 1;i < 2 * n;i++) { // 最后一条扫描线不用计入统计\n        editTree(1, line[i].s, line[i].t, line[i].typ);\n        ans += tree[1].len * (line[i + 1].y - line[i].y);\n    }\n\n    cout << ans << "\\n";\n}\n\nint main() {\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n    int t = 1;\n    // cin >> t;cin.tie(0);\n    while (t--)\n        solve();\n\n    return 0;\n}\n'})}),"\n",(0,a.jsxs)(e.h2,{id:"i-hate-it",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#i-hate-it",children:"#"}),"I Hate It"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:"https://acm.hdu.edu.cn/showproblem.php?pid=1754",rel:"noopener noreferrer",target:"_blank",children:"I Hate It"})}),"\n",(0,a.jsxs)(e.h3,{id:"题意-1",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#题意-1",children:"#"}),"题意"]}),"\n",(0,a.jsx)(e.p,{children:"老师想询问学生中从某某到某某分数最高的是多少，并支持修改单个学生的成绩。"}),"\n",(0,a.jsxs)(e.h4,{id:"数据范围-1",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#数据范围-1",children:"#"}),"数据范围"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mn,{children:"0"}),(0,a.jsx)(e.mo,{children:"<"}),(0,a.jsx)(e.mi,{children:"n"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsx)(e.mn,{children:"200000"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"0\\lt n\\leq 200000"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6835em",verticalAlign:"-0.0391em"}}),(0,a.jsx)(e.span,{className:"mord",children:"0"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"<"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"n"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"200000"})]})]})]})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mn,{children:"0"}),(0,a.jsx)(e.mo,{children:"<"}),(0,a.jsx)(e.mi,{children:"m"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsx)(e.mn,{children:"5000"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"0\\lt m\\leq 5000"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6835em",verticalAlign:"-0.0391em"}}),(0,a.jsx)(e.span,{className:"mord",children:"0"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"<"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"m"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"5000"})]})]})]})}),"\n",(0,a.jsxs)(e.h3,{id:"思路-1",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#思路-1",children:"#"}),"思路"]}),"\n",(0,a.jsx)(e.p,{children:"建树，节点记录最大值，单点修改。注意多组读入"}),"\n",(0,a.jsxs)(e.h3,{id:"代码-1",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#代码-1",children:"#"}),"代码"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-cpp",children:"#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int maxn = 2e5 + 50;\nconst int mo109 = 1000000007;\nconst int mo998 = 998244353;\n\nstruct node {\n    int mxval;\n}tree[maxn << 2];\n\nint n, m;\nint a[maxn];\n\nvoid build(int l, int r, int p) {\n    if (l == r) {\n        tree[p] = { a[l] };\n        return;\n    }\n    int mid = l + (r - l) / 2;\n    build(l, mid, p * 2);\n    build(mid + 1, r, p * 2 + 1);\n    tree[p].mxval = max(tree[p * 2].mxval, tree[p * 2 + 1].mxval);\n}\n\nvoid pushdown(int p) {\n    tree[p].mxval = max(tree[p * 2].mxval, tree[p * 2 + 1].mxval);\n}\n\nvoid update(int cl, int cr, int p, int lr, int newval) {\n    if (cl == cr && cl == lr) {\n        a[cl] = newval;\n        tree[p] = { newval };\n        return;\n    }\n    int mid = cl + (cr - cl) / 2;\n    if (lr <= mid) {\n        update(cl, mid, p * 2, lr, newval);\n    }\n    else {\n        update(mid + 1, cr, p * 2 + 1, lr, newval);\n    }\n    pushdown(p);\n}\n\nint query(int cl, int cr, int p, int l, int r) {\n    if (cl >= l && cr <= r) {\n        return tree[p].mxval;\n    }\n    int mid = cl + (cr - cl) / 2;\n    int mx = -1;\n    if (mid >= l) {\n        int x = query(cl, mid, p * 2, l, r);\n        mx = max(x, mx);\n    }\n    if (mid + 1 <= r) {\n        int x = query(mid + 1, cr, p * 2 + 1, l, r);\n        mx = max(mx, x);\n    }\n    return mx;\n}\n\nvoid solve() {\n    // cin >> n >> m;\n    for (int i = 1;i <= n;i++) {\n        cin >> a[i];\n    }\n    build(1, n, 1);\n    while (m--) {\n        char c;cin >> c;\n        int a, b;cin >> a >> b;\n        if (c == 'Q') {\n            cout << query(1, n, 1, a, b) << '\\n';\n        }\n        else {\n            update(1, n, 1, a, b);\n        }\n    }\n}\n\nint main() {\n    ios::sync_with_stdio(0);\n    cin.tie(0);\n    int _ = 1;\n    // cin >> _;cin.get();\n    while (cin >> n >> m)\n        solve();\n\n    return 0;\n}\n"})}),"\n",(0,a.jsxs)(e.h2,{id:"覆盖的面积",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#覆盖的面积",children:"#"}),"覆盖的面积"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:"https://acm.hdu.edu.cn/showproblem.php?pid=1255",rel:"noopener noreferrer",target:"_blank",children:"覆盖的面积"})}),"\n",(0,a.jsxs)(e.h3,{id:"题意-2",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#题意-2",children:"#"}),"题意"]}),"\n",(0,a.jsx)(e.p,{children:"给定平面上的矩阵，求出被这些矩阵覆盖至少两次的区域面积。"}),"\n",(0,a.jsxs)(e.h4,{id:"数据范围-2",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#数据范围-2",children:"#"}),"数据范围"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsx)(e.mi,{children:"N"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsx)(e.mn,{children:"1000"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"1\\leq N\\leq 1000"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8193em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1000"})]})]})]})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mn,{children:"0"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mi,{children:"i"})]}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"y"}),(0,a.jsx)(e.mi,{children:"i"})]}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsx)(e.mn,{children:"100000"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"0\\leq x_i,y_i\\leq 100000"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord",children:"0"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8304em",verticalAlign:"-0.1944em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"100000"})]})]})]})}),"\n",(0,a.jsxs)(e.h3,{id:"思路-2",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#思路-2",children:"#"}),"思路"]}),"\n",(0,a.jsxs)(e.p,{children:["扫描线求矩形并，在求并时统计更新被覆盖的次数，在",(0,a.jsx)(e.code,{children:"pushup"}),"的时候，当父节点已有一次覆盖，而子区间已经被包含一次，则子区间已经被包含了2次。"]}),"\n",(0,a.jsxs)(e.h3,{id:"代码-2",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#代码-2",children:"#"}),"代码"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-cpp",children:'#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef double ld;\nconst int maxn = 2050;\n\nstruct line {\n    int typ;\n    ld s, t, y;\n    bool operator<(const line& l)const {\n        return y < l.y; // 按照横坐标升序排序\n    }\n}line[maxn * 2];\n\nstruct node {\n    int l, r;\n    int cnt;\n    ld len, len2;\n}tree[maxn * 4];\n\nld X[maxn * 2];\n\nvoid build(int p, int l, int r) {\n    tree[p] = { l,r,0,0,0 };\n    if (l == r)return;\n    int mid = l + (r - l) / 2;\n    build(p * 2, l, mid);\n    build(p * 2 + 1, mid + 1, r);\n}\n\nvoid pushup(int p) {\n    int l = tree[p].l, r = tree[p].r;\n\n    if (tree[p].cnt) { // 有覆盖\n        tree[p].len = X[r + 1] - X[l];\n    }\n    else if (l != r) {\n        tree[p].len = tree[p * 2].len + tree[p * 2 + 1].len;\n    }\n    else {\n        tree[p].len = 0;\n    }\n\n    if (tree[p].cnt >= 2) {\n        tree[p].len2 = X[r + 1] - X[l];\n    }\n    else if (l != r && tree[p].cnt == 1) {\n        // cnt=1时,子区间已经被包含过一次，再加上父节点p的一次则子区间被包含了2次\n        tree[p].len2 = tree[p * 2].len + tree[p * 2 + 1].len;\n    }\n    else if (l != r) {\n        tree[p].len2 = tree[p * 2].len2 + tree[p * 2 + 1].len2;\n    }\n    else {\n        tree[p].len2 = 0;\n    }\n}\n\nvoid editTree(int p, ld l, ld r, int c) {\n    // 要修改的x区间:[l,r]\n    int pl = tree[p].l, pr = tree[p].r; // 当前节点对应的左右坐标\n\n    if (l >= X[pr + 1] || r <= X[pl]) {\n        // pushup(p);\n        return;\n    }\n\n    if (X[pl] >= l && X[pr + 1] <= r) { // 包含\n        tree[p].cnt += c;\n        pushup(p);\n        return;\n    }\n\n\n    editTree(p * 2, l, r, c);\n    editTree(p * 2 + 1, l, r, c);\n    pushup(p);\n}\n\n\nvoid solve() {\n    int n;cin >> n;\n    set<ld>Xs;\n    for (int i = 1;i <= n;i++) {\n        ld x1, y1, x2, y2; // 左下右上\n        cin >> x1 >> y1 >> x2 >> y2;\n        line[i] = { 1,x1,x2,y1 }; // 下边\n        line[i + n] = { -1,x1,x2,y2 }; // 上边\n        Xs.insert(x1), Xs.insert(x2); // 离散化\n    }\n    sort(line + 1, line + 1 + 2 * n);\n    int t = 0;\n    for (auto p : Xs) {\n        X[++t] = p;\n    }\n\n    build(1, 1, t - 1); // 对离散化的X轴建树\n\n    ld ans = 0;\n    for (int i = 1;i < 2 * n;i++) { // 最后一条扫描线不用计入统计\n        editTree(1, line[i].s, line[i].t, line[i].typ);\n        ans += tree[1].len2 * (line[i + 1].y - line[i].y);\n    }\n    ans += 0.001; // 样例好像有石\n    cout << fixed << setprecision(2) << ans << "\\n";\n}\n\nint main() {\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n    int t = 1;\n    cin >> t;cin.tie(0);\n    while (t--)\n        solve();\n\n    return 0;\n}\n'})}),"\n",(0,a.jsxs)(e.h2,{id:"敌兵布阵",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#敌兵布阵",children:"#"}),"敌兵布阵"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:"https://acm.hdu.edu.cn/showproblem.php?pid=1166",rel:"noopener noreferrer",target:"_blank",children:"敌兵布阵"})}),"\n",(0,a.jsxs)(e.h3,{id:"题意-3",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#题意-3",children:"#"}),"题意"]}),"\n",(0,a.jsxs)(e.p,{children:["有",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"N"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"N"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"})]})})]}),"个营地，初始第",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"i"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"i"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6595em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"})]})})]}),"个营地有",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"a"}),(0,a.jsx)(e.mi,{children:"i"})]})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"a_i"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.5806em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"a"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]})]})})]}),"个人，有",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mn,{children:"4"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"4"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"4"})]})})]}),"种命令。"]}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"Add i j"}),"，表示第",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"i"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"i"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6595em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"})]})})]}),"个营地增加",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"j"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"j"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.854em",verticalAlign:"-0.1944em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"})]})})]}),"人。"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"Sub i j"}),"，表示第",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"i"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"i"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6595em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"})]})})]}),"个营地减少",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"j"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"j"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.854em",verticalAlign:"-0.1944em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"})]})})]}),"人。"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"Query i j"}),"，查询第",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"i"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"i"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6595em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"})]})})]}),"到第",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"j"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"j"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.854em",verticalAlign:"-0.1944em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"})]})})]}),"个营地一共有多少人。"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"End"}),"，表示结束。"]}),"\n"]}),"\n",(0,a.jsxs)(e.h4,{id:"数据范围-3",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#数据范围-3",children:"#"}),"数据范围"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"N"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsx)(e.mn,{children:"50000"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"N\\leq 50000"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8193em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"50000"})]})]})]})}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"a"}),(0,a.jsx)(e.mi,{children:"i"})]}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsx)(e.mn,{children:"50"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"1\\leq a_i\\leq 50"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.786em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"a"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"50"})]})]})]}),"​"]}),"\n"]}),"\n",(0,a.jsxs)(e.h3,{id:"思路-3",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#思路-3",children:"#"}),"思路"]}),"\n",(0,a.jsx)(e.p,{children:"很模板的一个题。"}),"\n",(0,a.jsxs)(e.h3,{id:"代码-3",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#代码-3",children:"#"}),"代码"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-cpp",children:'#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef double ld;\nconst int maxn = 5e4 + 50;\n\nstruct node {\n    int val;\n}tree[maxn * 4];\n\nint a[maxn];\n\nvoid build(int p, int l, int r) {\n    if (l == r) {\n        tree[p].val = a[l];\n        return;\n    }\n    int mid = l + (r - l) / 2;\n    build(p * 2, l, mid);\n    build(p * 2 + 1, mid + 1, r);\n    tree[p].val = tree[p * 2].val + tree[p * 2 + 1].val;\n}\n\nvoid pushup(int p,int l,int r) {\n    if (l == r)return;\n    tree[p].val = tree[p * 2].val + tree[p * 2 + 1].val;\n}\n\nvoid update(int p, int cl, int cr, int goal,int x) {\n    if (cl > goal || cr < goal)return;\n    if (cl == cr) {\n        tree[p].val += x;\n        pushup(p, cl, cr);\n        return;\n    }\n    int mid = cl + (cr - cl) / 2;\n    update(p * 2, cl, mid, goal, x);\n    update(p * 2 + 1, mid + 1, cr, goal, x);\n    pushup(p, cl, cr);\n}\n\nint query(int p, int cl, int cr, int l, int r) {\n    if (cl > r || cr < l)\n        return 0;\n    if (cl >= l && cr <= r) {\n        return tree[p].val;\n    }\n    int mid = cl + (cr - cl) / 2;\n    int tot = 0;\n    tot += query(p * 2, cl, mid, l, r);\n    tot += query(p * 2 + 1, mid + 1, cr, l, r);\n    return tot;\n}\n\nint ccnt;\nvoid solve() {\n    int n;cin >> n;\n    for (int i = 1;i <= n;i++) {\n        cin >> a[i];\n    }\n    build(1, 1, n);\n    string s;\n    cout << "Case " << ++ccnt << ":\\n";\n    while (cin >> s) {\n        if (s == "End")break;\n        if (s == "Query") {\n            int l, r;cin >> l >> r;\n            cout << query(1, 1, n, l, r) << \'\\n\';\n        }\n        else if (s == "Add") {\n            int i, j;cin >> i >> j;\n            update(1, 1, n, i, j);\n        }\n        else if (s == "Sub") {\n            int i, j;cin >> i >> j;\n            update(1, 1, n, i, -j);\n        }\n    }\n}\n\nint main() {\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n    int t = 1;\n    cin >> t;cin.tie(0);\n    ccnt = 0;\n    while (t--)\n        solve();\n\n    return 0;\n}\n'})}),"\n",(0,a.jsxs)(e.h2,{id:"单峰数列",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#单峰数列",children:"#"}),"单峰数列"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:"https://acm.hdu.edu.cn/showproblem.php?pid=7463",rel:"noopener noreferrer",target:"_blank",children:"单峰数列"})}),"\n",(0,a.jsxs)(e.h3,{id:"题意-4",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#题意-4",children:"#"}),"题意"]}),"\n",(0,a.jsxs)(e.p,{children:["给定长度为",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"n"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"n"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"n"})]})})]}),"的数列",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"a"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"a"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"a"})]})})]}),"，支持以下操作："]}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"1 l r x"}),"：给区间",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mi,{children:"l"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"[l,r]"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"mclose",children:"]"})]})})]}),"的所有数加上",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"x"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"x"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"})]})})]})]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"2 l r"}),"：查询区间",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mi,{children:"l"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"[l,r]"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"mclose",children:"]"})]})})]}),"中的元素是否全都相同"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"3 l r"}),"：查询区间",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mi,{children:"l"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"[l,r]"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"mclose",children:"]"})]})})]}),"中的元素是否严格上升，当",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"l"}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsx)(e.mi,{children:"r"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"l==r"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6944em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"=="}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"})]})]})]}),"时认为是严格上升的"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"4 l r"}),"：查询区间",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mi,{children:"l"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"[l,r]"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"mclose",children:"]"})]})})]}),"中的元素是否严格下降，当",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"l"}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsx)(e.mi,{children:"r"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"l==r"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6944em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"=="}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"})]})]})]}),"时认为是严格下降的"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"5 l r"}),"：查询区间",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mi,{children:"l"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"[l,r]"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"mclose",children:"]"})]})})]}),"是否是单峰数列，单峰数列符合右侧严格递增，左侧严格递减，并且左右侧的区间不为空，保证",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mo,{children:"−"}),(0,a.jsx)(e.mi,{children:"l"}),(0,a.jsx)(e.mo,{children:"+"}),(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mo,{children:"≥"}),(0,a.jsx)(e.mn,{children:"3"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"r-l+1\\geq 3"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"−"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7778em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"+"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≥"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"3"})]})]})]}),"。"]}),"\n"]}),"\n",(0,a.jsxs)(e.h4,{id:"数据范围-4",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#数据范围-4",children:"#"}),"数据范围"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mn,{children:"3"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsx)(e.mi,{children:"n"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsxs)(e.msup,{children:[(0,a.jsx)(e.mn,{children:"10"}),(0,a.jsx)(e.mn,{children:"5"})]})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"3\\leq n \\leq 10^5"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord",children:"3"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"n"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8141em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord",children:"0"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,a.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"5"})})]})})})})})]})]})]})]})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mn,{children:"0"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsxs)(e.msub,{children:[(0,a.jsx)(e.mi,{children:"a"}),(0,a.jsx)(e.mi,{children:"i"})]}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsxs)(e.msup,{children:[(0,a.jsx)(e.mn,{children:"10"}),(0,a.jsx)(e.mn,{children:"9"})]})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"0\\leq a_i\\leq 10^9"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord",children:"0"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.786em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord mathnormal",children:"a"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.3117em"},children:(0,a.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"})})]})}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(e.span,{})})})]})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8141em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord",children:"0"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,a.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"9"})})]})})})})})]})]})]})]})}),"\n",(0,a.jsx)(e.li,{children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsx)(e.mi,{children:"q"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsx)(e.mn,{children:"2"}),(0,a.jsx)(e.mo,{children:"\xd7"}),(0,a.jsxs)(e.msup,{children:[(0,a.jsx)(e.mn,{children:"10"}),(0,a.jsx)(e.mn,{children:"5"})]})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"1\\leq q \\leq 2\\times 10^5"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7804em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8304em",verticalAlign:"-0.1944em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(e.span,{className:"mord",children:"2"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8141em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord",children:"0"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,a.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"5"})})]})})})})})]})]})]})]})}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:["对于第一类操作，保证",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{children:"−"}),(0,a.jsxs)(e.msup,{children:[(0,a.jsx)(e.mn,{children:"10"}),(0,a.jsx)(e.mn,{children:"9"})]}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mo,{children:"≤"}),(0,a.jsxs)(e.msup,{children:[(0,a.jsx)(e.mn,{children:"10"}),(0,a.jsx)(e.mn,{children:"9"})]})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"-10^9\\leq x\\leq 10^9"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.9501em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord",children:"−"}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord",children:"0"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,a.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"9"})})]})})})})})]}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≤"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.8141em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mord",children:"0"}),(0,a.jsx)(e.span,{className:"msupsub",children:(0,a.jsx)(e.span,{className:"vlist-t",children:(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.8141em"},children:(0,a.jsxs)(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"9"})})]})})})})})]})]})]})]})]}),"\n",(0,a.jsxs)(e.h3,{id:"思路-4",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#思路-4",children:"#"}),"思路"]}),"\n",(0,a.jsx)(e.p,{children:"用三个变量记录区间左值、右值和懒标记。"}),"\n",(0,a.jsx)(e.p,{children:"用三个布尔值变量记录当前区间是否是相同、上升、下降、单峰。在判断合并后是否是单峰时，主要满足单峰的区间必须大于等于3，当左右两个区间分别是上升、下降，且某个区间只有一个数时，要注意比较左右值。"}),"\n",(0,a.jsxs)(e.h3,{id:"代码-4",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#代码-4",children:"#"}),"代码"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-cpp",children:"#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define lson(p) tree[p * 2]\n#define rson(p) tree[p * 2 + 1]\n\ntypedef long long ll;\ntypedef unsigned long long ull;\n\nconst int maxn = 4e5 + 50;\n\nstruct node {\n  int l, r;\n  ll lval, rval, lazy;\n  bool isup, isdown, issame, isheap;\n} tree[maxn << 2];\n\nll a[maxn];\n\nnode merge(node ret1, node ret2) {\n  node ret;\n\n  ret = {\n    ret1.l,\n    ret2.r,\n    ret1.lval,\n    ret2.rval,\n    0ll,\n    true,\n    true,\n    true,\n    false\n  };\n\n  ret.issame = ret1.issame && ret2.issame && ret1.rval == ret2.lval;\n  ret.isup = ret1.isup && ret2.isup && ret1.rval < ret2.lval;\n  ret.isdown = ret1.isdown && ret2.isdown && ret1.rval > ret2.lval;\n\n  if (ret1.isup && ret2.isdown) {\n    if (ret1.l == ret1.r && ret1.rval < ret2.lval && ret2.l != ret2.r)\n      ret.isheap = true;\n    else if (ret2.l == ret2.r && ret1.rval > ret2.lval && ret1.l != ret1.r)\n      ret.isheap = true;\n    else if (ret1.l != ret1.r && ret2.l != ret2.r)\n      ret.isheap = true;\n  }\n\n  if (ret1.isup && ret2.isheap && ret1.rval < ret2.lval)\n    ret.isheap = true;\n  if (ret1.isheap && ret2.isdown && ret1.rval > ret2.lval)\n    ret.isheap = true;\n\n  return ret;\n}\n\nvoid build(int p, int l, int r) {\n  if (l == r) {\n    tree[p] = {l, r, a[l], a[r], 0ll, true, true, true, false};\n    return;\n  }\n  int mid = l + (r - l) / 2;\n  build(p * 2, l, mid);\n  build(p * 2 + 1, mid + 1, r);\n  tree[p] = merge(lson(p), rson(p));\n}\n\nvoid pushdown(int p) {\n  int l = tree[p].l, r = tree[p].r;\n  if (l == r) {\n    return;\n  }\n  if (tree[p].lazy) {\n    ll x = tree[p].lazy;\n    lson(p).lazy += x, rson(p).lazy += x;\n    lson(p).lval += x, rson(p).lval += x;\n    lson(p).rval += x, rson(p).rval += x;\n    tree[p].lazy = 0ll;\n  }\n}\n\nvoid pushup(int p) {\n  int l = tree[p].l, r = tree[p].r;\n  if (l == r) {\n    return;\n  }\n  tree[p] = merge(lson(p), rson(p));\n}\n\nvoid update(int p, int cl, int cr, int l, int r, ll num) {\n  if (cl >= l && cr <= r) {\n    tree[p].lval += num, tree[p].rval += num;\n    tree[p].lazy += num;\n    pushdown(p);\n    pushup(p);\n    return;\n  }\n  pushdown(p);\n  int mid = cl + (cr - cl) / 2;\n  if (l <= mid)\n    update(p * 2, cl, mid, l, r, num);\n  if (mid + 1 <= r)\n    update(p * 2 + 1, mid + 1, cr, l, r, num);\n  pushup(p);\n}\n\nnode query(int p, int cl, int cr, int l, int r) {\n  if (cl >= l && cr <= r) {\n    return tree[p];\n  }\n\n  pushdown(p);\n  int mid = cl + (cr - cl) / 2;\n\n  node ret, ret1, ret2;\n\n  ret1.l = ret2.l = -1;\n  ret.l = cl, ret.r = cr;\n\n  if (l <= mid) {\n    ret1 = query(p * 2, cl, mid, l, r);\n  }\n  if (mid + 1 <= r) {\n    ret2 = query(p * 2 + 1, mid + 1, cr, l, r);\n  }\n  pushup(p);\n\n  if (ret1.l == -1)\n    return ret2;\n  if (ret2.l == -1)\n    return ret1;\n\n  ret = merge(ret1, ret2);\n  \n  return ret;\n}\n\nvoid solve() {\n  int n;\n  cin >> n;\n  for (int i = 1; i <= n; i++) {\n    cin >> a[i];\n  }\n  build(1, 1, n);\n  int q;\n  cin >> q;\n  while (q--) {\n    int op, l, r;\n    cin >> op >> l >> r;\n    if (op == 1) {\n      ll x;\n      cin >> x;\n      update(1,1,n,l,r,x);\n    } else {\n      node ret = query(1, 1, n, l, r);\n      if (op == 2) {\n        cout << ret.issame << '\\n';\n      } else if (op == 3) {\n        cout << ret.isup << '\\n';\n      } else if (op == 4) {\n        cout << ret.isdown << '\\n';\n      } else if (op == 5) {\n        cout << ret.isheap << '\\n';\n      }\n    }\n  }\n}\n\nvoid init() {\n}\n\nint main(void) {\n  ios::sync_with_stdio(false);\n  cin.tie(0);\n  init();\n  int t = 1;\n  // cin >> t;\n  // cin.get();\n  while (t--)\n    solve();\n\n  return 0;\n}\n\n"})})]})}function r(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,l.ah)(),s.components);return e?(0,a.jsx)(e,Object.assign({},s,{children:(0,a.jsx)(t,s)})):t(s)}let c=r;r.__RSPRESS_PAGE_META={},r.__RSPRESS_PAGE_META["posts%2Falgorithm%2Fsegtree_practice.md"]={toc:[{id:"todo-list",text:"TODO List",depth:3},{id:"atlantis--p5490-扫描线矩形面积并",text:"Atlantis & P5490 扫描线矩形面积并",depth:2},{id:"题意",text:"题意",depth:3},{id:"数据范围",text:"数据范围",depth:4},{id:"思路",text:"思路",depth:3},{id:"代码",text:"代码",depth:3},{id:"i-hate-it",text:"I Hate It",depth:2},{id:"题意-1",text:"题意",depth:3},{id:"数据范围-1",text:"数据范围",depth:4},{id:"思路-1",text:"思路",depth:3},{id:"代码-1",text:"代码",depth:3},{id:"覆盖的面积",text:"覆盖的面积",depth:2},{id:"题意-2",text:"题意",depth:3},{id:"数据范围-2",text:"数据范围",depth:4},{id:"思路-2",text:"思路",depth:3},{id:"代码-2",text:"代码",depth:3},{id:"敌兵布阵",text:"敌兵布阵",depth:2},{id:"题意-3",text:"题意",depth:3},{id:"数据范围-3",text:"数据范围",depth:4},{id:"思路-3",text:"思路",depth:3},{id:"代码-3",text:"代码",depth:3},{id:"单峰数列",text:"单峰数列",depth:2},{id:"题意-4",text:"题意",depth:3},{id:"数据范围-4",text:"数据范围",depth:4},{id:"思路-4",text:"思路",depth:3},{id:"代码-4",text:"代码",depth:3}],title:"线段树专题练习",headingTitle:"",frontmatter:{title:"线段树专题练习",date:"2024-08-16T14:43:59.000Z",lastmod:"2024-08-16T14:43:59.000Z",draft:!1,authors:[],description:"",tags:["算法","线段树","数据结构","算法模板"],categories:["在学算法的日子里"],series:["题解记录"],hiddenFromHomePage:!1,hiddenFromSearch:!1,featuredImage:"https://img.dodolalorc.cn/i/2024/12/10/67580e58b035a.png",featuredImagePreview:"https://img.dodolalorc.cn/i/2024/12/10/67580e58b035a.png",toc:{enable:!0},math:{enable:!0},lightgallery:!1,license:""}}},3208:function(s,e,n){n.d(e,{Z:()=>c});var a=n(2676),l=n(5271),i=n(2815);n(2791);let t={"zh-CN":s=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${s.minutes>=1?`${Math.ceil(s.minutes)} \u{5206}\u{949F}`:"小于 1 分钟"}`,"en-US":s=>`Estimated reading time: ${s.minutes>=1?`${Math.ceil(s.minutes)} minutes`:"less than 1 minute"}`};function r(s,e,n){let a=Object.keys(t).includes(e)?e:n;return t[a](s)}let c=s=>{let{defaultLocale:e="en-US"}=s,n=(0,i.Vi)().page.readingTimeData,t=(0,i.Jr)(),c=(0,i.e7)(),[m,h]=(0,l.useState)(r(n,t,e));return(0,l.useEffect)(()=>{h(r(n,t,e))},[t,n]),(0,a.jsx)("span",{"data-dark":String(c),className:"rp-reading-time",children:m})}}}]);