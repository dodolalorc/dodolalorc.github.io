"use strict";(self.webpackChunkblogsite_rspress=self.webpackChunkblogsite_rspress||[]).push([["7086"],{9002:function(s,e,n){n.r(e),n.d(e,{default:()=>m});var a=n(2676),l=n(453),i=n(5523);function t(s){let e=Object.assign({h2:"h2",a:"a",h3:"h3",p:"p",span:"span",math:"math",semantics:"semantics",mrow:"mrow",mi:"mi",mo:"mo",annotation:"annotation",mn:"mn",munderover:"munderover",pre:"pre",code:"code",mfrac:"mfrac"},(0,l.ah)(),s.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.h2,{id:"g-snake-move",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#g-snake-move",children:"#"}),"G. Snake Move"]}),"\n",(0,a.jsx)(i.Z,{defaultLocale:"zh-CN"}),"\n",(0,a.jsxs)(e.h3,{id:"题意",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#题意",children:"#"}),"题意"]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"n"}),(0,a.jsx)(e.mo,{children:"\xd7"}),(0,a.jsx)(e.mi,{children:"m"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"n\\times m"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"n"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"m"})]})]})]}),"的网格中有一条长度为",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"k"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"k"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6944em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"})]})})]}),"的贪吃蛇，贪吃蛇支持上下左右移动 1 格的操作，以及缩短 1 个身体长度的操作。"]}),"\n",(0,a.jsxs)(e.p,{children:["设",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"f"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mi,{children:"j"}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"f(i,j)"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"}),(0,a.jsx)(e.span,{className:"mclose",children:")"})]})})]}),"为从蛇头从初始位置到达网格中点",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mi,{children:"j"}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"(i,j)"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"}),(0,a.jsx)(e.span,{className:"mclose",children:")"})]})})]}),"所需要的最少的操作数，网格中不可到达的格子操作数设为",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mn,{children:"0"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"0"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"0"})]})})]}),"，求解输出："]}),"\n",(0,a.jsx)(e.span,{className:"katex-display",children:(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsxs)(e.munderover,{children:[(0,a.jsx)(e.mo,{children:"∑"}),(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsx)(e.mn,{children:"1"})]}),(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsx)(e.mi,{children:"n"})]})]}),(0,a.jsxs)(e.munderover,{children:[(0,a.jsx)(e.mo,{children:"∑"}),(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"j"}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsx)(e.mn,{children:"1"})]}),(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"j"}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsx)(e.mi,{children:"m"})]})]}),(0,a.jsx)(e.mi,{children:"f"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mi,{children:"j"}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\sum_{i=1}^{i=n}\\sum_{j=1}^{j=m}f(i,j)"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"3.2726em",verticalAlign:"-1.4138em"}}),(0,a.jsx)(e.span,{className:"mop op-limits",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsxs)(e.span,{className:"vlist",style:{height:"1.8117em"},children:[(0,a.jsxs)(e.span,{style:{top:"-1.8723em",marginLeft:"0em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3.05em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"}),(0,a.jsx)(e.span,{className:"mrel mtight",children:"="}),(0,a.jsx)(e.span,{className:"mord mtight",children:"1"})]})})]}),(0,a.jsxs)(e.span,{style:{top:"-3.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3.05em"}}),(0,a.jsx)(e.span,{children:(0,a.jsx)(e.span,{className:"mop op-symbol large-op",children:"∑"})})]}),(0,a.jsxs)(e.span,{style:{top:"-4.3em",marginLeft:"0em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3.05em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"i"}),(0,a.jsx)(e.span,{className:"mrel mtight",children:"="}),(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"n"})]})})]})]}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"1.2777em"},children:(0,a.jsx)(e.span,{})})})]})}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mop op-limits",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsxs)(e.span,{className:"vlist",style:{height:"1.8588em"},children:[(0,a.jsxs)(e.span,{style:{top:"-1.8723em",marginLeft:"0em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3.05em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.05724em"},children:"j"}),(0,a.jsx)(e.span,{className:"mrel mtight",children:"="}),(0,a.jsx)(e.span,{className:"mord mtight",children:"1"})]})})]}),(0,a.jsxs)(e.span,{style:{top:"-3.05em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3.05em"}}),(0,a.jsx)(e.span,{children:(0,a.jsx)(e.span,{className:"mop op-symbol large-op",children:"∑"})})]}),(0,a.jsxs)(e.span,{style:{top:"-4.3471em",marginLeft:"0em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3.05em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(e.span,{className:"mord mtight",children:[(0,a.jsx)(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.05724em"},children:"j"}),(0,a.jsx)(e.span,{className:"mrel mtight",children:"="}),(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"m"})]})})]})]}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"1.4138em"},children:(0,a.jsx)(e.span,{})})})]})}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05724em"},children:"j"}),(0,a.jsx)(e.span,{className:"mclose",children:")"})]})})]})}),"\n",(0,a.jsxs)(e.h3,{id:"思路",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#思路",children:"#"}),"思路"]}),"\n",(0,a.jsx)(e.p,{children:"初始时蛇身压住的格子有一个最早释放的时间，可以通过预处理获得。"}),"\n",(0,a.jsx)(e.p,{children:"当蛇头开始移动时，蛇头经过的格子不会有更早的到达时刻，如果下一步可以到达蛇身压住的格子，绕行不可能优于直接缩短长度的操作数。"}),"\n",(0,a.jsx)(e.p,{children:"正常从蛇头进行 BFS，如果遇到初始时不被蛇身压住的格子则正常加入队列，如果遇到被压住的格子，对释放时间和当前步数取max。"}),"\n",(0,a.jsxs)(e.h3,{id:"代码",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#代码",children:"#"}),"代码"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-cpp",children:"#include <bits/stdc++.h>\n\n#define x first\n#define y second\n\nusing namespace std;\n\ntypedef double ld;\ntypedef unsigned long ul;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<ll, ll> pll;\n\nconst int maxn = 2e5 + 50;\nconst ll inf = 0x3f3f3f3f3f3f;\nconst vector<pll> dxy = {{-1, 0}, {1, 0}, {0, 1}, {0, -1}};\n\nll n, m, k;\nchar maz[3090][3090];\null dis[3090][3090];\nbool inq[3090][3090], vis[3090][3090];\nmap<ll, pll> snake;\nmap<pll, ll> body;\n\nbool check(pll &p) {\n  return p.x >= 1 && p.x <= n && p.y >= 1 && p.y <= m && maz[p.x][p.y] != '#';\n};\n\nvoid bfs(pll st) {\n  priority_queue<pair<ll, pll>, vector<pair<ll, pll>>, greater<>> q;\n  q.push({0ll, st});\n  dis[st.x][st.y] = 0ll;\n  inq[st.x][st.y] = true;\n  while (!q.empty()) {\n    auto [d, p] = q.top();\n    q.pop();\n    dis[p.x][p.y] = d;\n    for (auto [dx, dy] : dxy) {\n      pll pi = {p.x + dx, p.y + dy};\n      if (!check(pi))\n        continue;\n      if (inq[pi.x][pi.y])\n        continue;\n\n      if (body.count(pi)) {\n        ll di = max(d + 1, body[pi]);\n        q.push({di, pi});\n        inq[pi.x][pi.y] = true;\n      } else {\n        q.push({d + 1, pi});\n        inq[pi.x][pi.y] = true;\n      }\n    }\n  }\n}\n\nvoid solve() {\n  cin >> n >> m >> k;\n\n  body.clear();\n\n  pll st;\n  for (ll i = k - 1; i >= 0; i--) {\n    pll p;\n    cin >> p.x >> p.y;\n    snake[i] = p;\n    if (i == k - 1) {\n      st = p;\n      body[p] = 0;\n    } else {\n      body[p] = i + 1;\n    }\n  }\n\n  for (int i = 1; i <= n; i++) {\n    for (int j = 1; j <= m; j++) {\n      cin >> maz[i][j];\n      dis[i][j] = inf;\n    }\n  }\n\n  bfs(st);\n\n  ull ans = 0;\n  for (ll i = 1; i <= n; i++) {\n    for (ll j = 1; j <= m; j++) {\n      ull d = dis[i][j];\n      if (d == inf)\n        d = 0;\n      ans += d * d;\n    }\n  }\n  cout << fixed << setprecision(0) << ans << '\\n';\n}\n\nvoid init() {\n}\nint main(void) {\n  ios::sync_with_stdio(false);\n  cin.tie(0);\n  init();\n  int _t = 1;\n  // cin >> _t;\n  // cin.get();\n  while (_t--)\n    solve();\n\n  return 0;\n}\n"})}),"\n",(0,a.jsxs)(e.h2,{id:"j-mysterious-tree",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#j-mysterious-tree",children:"#"}),"J. Mysterious Tree"]}),"\n",(0,a.jsxs)(e.h3,{id:"题意-1",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#题意-1",children:"#"}),"题意"]}),"\n",(0,a.jsx)(e.p,{children:"交互题。"}),"\n",(0,a.jsxs)(e.p,{children:["有一棵节点数",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"n"}),(0,a.jsx)(e.mo,{children:"≥"}),(0,a.jsx)(e.mn,{children:"4"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"n\\ge 4"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"n"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:"≥"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"4"})]})]})]}),"的树，树的形状是链状或者星状，每次询问两个点",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"u"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"u"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"u"})]})})]}),"和",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"v"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"v"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"v"})]})})]}),"，会返回",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsx)(e.mi,{children:"u"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mi,{children:"v"}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"(u,v)"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"u"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"v"}),(0,a.jsx)(e.span,{className:"mclose",children:")"})]})})]}),"之间是否有边，需要在",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"⌈"}),(0,a.jsxs)(e.mfrac,{children:[(0,a.jsx)(e.mi,{children:"n"}),(0,a.jsx)(e.mn,{children:"2"})]}),(0,a.jsx)(e.mo,{stretchy:"false",children:"⌉"}),(0,a.jsx)(e.mo,{children:"+"}),(0,a.jsx)(e.mn,{children:"3"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\lceil \\frac{n}{2} \\rceil + 3"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1.095em",verticalAlign:"-0.345em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"⌈"}),(0,a.jsxs)(e.span,{className:"mord",children:[(0,a.jsx)(e.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(e.span,{className:"mfrac",children:(0,a.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(e.span,{className:"vlist-r",children:[(0,a.jsxs)(e.span,{className:"vlist",style:{height:"0.6954em"},children:[(0,a.jsxs)(e.span,{style:{top:"-2.655em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:"2"})})})]}),(0,a.jsxs)(e.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(e.span,{style:{top:"-3.394em"},children:[(0,a.jsx)(e.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(e.span,{className:"mord mtight",children:(0,a.jsx)(e.span,{className:"mord mathnormal mtight",children:"n"})})})]})]}),(0,a.jsx)(e.span,{className:"vlist-s",children:"​"})]}),(0,a.jsx)(e.span,{className:"vlist-r",children:(0,a.jsx)(e.span,{className:"vlist",style:{height:"0.345em"},children:(0,a.jsx)(e.span,{})})})]})}),(0,a.jsx)(e.span,{className:"mclose nulldelimiter"})]}),(0,a.jsx)(e.span,{className:"mclose",children:"⌉"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"+"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(e.span,{className:"mord",children:"3"})]})]})]}),"的询问次数之内确定树的形状。"]}),"\n",(0,a.jsxs)(e.h3,{id:"思路-1",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#思路-1",children:"#"}),"思路"]}),"\n",(0,a.jsxs)(e.p,{children:["每次询问2个没有问过的节点",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mn,{children:"2"}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mo,{stretchy:"false",children:"("}),(0,a.jsx)(e.mn,{children:"3"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mn,{children:"4"}),(0,a.jsx)(e.mo,{stretchy:"false",children:")"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mi,{mathvariant:"normal",children:"."}),(0,a.jsx)(e.mi,{mathvariant:"normal",children:"."}),(0,a.jsx)(e.mi,{mathvariant:"normal",children:"."})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"(1,2),(3,4),..."})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord",children:"2"}),(0,a.jsx)(e.span,{className:"mclose",children:")"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"("}),(0,a.jsx)(e.span,{className:"mord",children:"3"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord",children:"4"}),(0,a.jsx)(e.span,{className:"mclose",children:")"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord",children:"..."})]})})]}),"如果到结束都没有问出边，此时节点数是偶数，则说明是链状，否则用三次询问确定节点",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsx)(e.mrow,{children:(0,a.jsx)(e.mi,{children:"n"})}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"n"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"n"})]})})]}),"是否是星状的中心（询问中要有两个点之间是没有边的），若是则为星，否则为链。"]}),"\n",(0,a.jsx)(e.p,{children:"问出一条边后，抉择确定这条边的两个点是否是星的中心。"}),"\n",(0,a.jsxs)(e.h3,{id:"代码-1",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#代码-1",children:"#"}),"代码"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-cpp",children:'void solve() {\n  ll n;\n  cin >> n;\n\n  ll t;\n  auto ask = [&](ll p1, ll p2) {\n    cout << "? " << p1 << \' \' << p2 << endl;\n    cin >> t;\n  };\n  auto conf = [&](ll x) { cout << "! " << x << endl; };\n\n  bool flag = false;\n  ll u = -1, v = -1;\n  for (ll i = 1; i + 1 <= n; i += 2) {\n    ask(i, i + 1);\n    if (t == 1) {\n      flag = true;\n      u = i, v = i + 1;\n      break;\n    }\n  }\n\n  ll t1, t2, t3;\n  if (!flag) {\n    if (n & 1) {\n      ask(n, 1), t1 = t;\n      ask(n, 2), t2 = t;\n      ask(n, 3), t3 = t;\n      if (t1 && t2 && t3) {\n        conf(2);\n      } else {\n        conf(1);\n      }\n    } else {\n      conf(1);\n    }\n    return;\n  }\n  if (u - 1 >= 1) {\n    ask(u - 1, u);\n    t1 = t;\n    if (t1 != 1) {\n      ask(u - 1, v);\n      t2 = t;\n      if (t2 != 1) {\n        conf(1);\n      } else {\n        if (v + 1 <= n)\n          ask(v, v + 1);\n        else\n          ask(u - 2, v);\n        t3 = t;\n        if (t3 != 1) {\n          conf(1);\n        } else {\n          conf(2);\n        }\n      }\n    } else {\n      if (u - 2 >= 1) {\n        ask(u - 2, u);\n      } else {\n        ask(v + 1, u);\n      }\n      t2 = t;\n      if (t2 != 1) {\n        conf(1);\n      } else {\n        conf(2);\n      }\n    }\n  } else {\n    ask(v, v + 1);\n    t1 = t;\n    if (t1 != 1) {\n      ask(v + 1, u);\n      t2 = t;\n      if (t2 != 1) {\n        conf(1);\n      } else {\n        ask(v + 2, u);\n        t3 = t;\n        if (t3 != 1) {\n          conf(1);\n        } else {\n          conf(2);\n        }\n      }\n    } else {\n      ask(v, v + 2);\n      t2 = t;\n      if (t2 != 1) {\n        conf(1);\n      } else {\n        conf(2);\n      }\n    }\n  }\n}\n'})}),"\n",(0,a.jsxs)(e.h2,{id:"m-v-diagram",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#m-v-diagram",children:"#"}),"M. V-Diagram"]}),"\n",(0,a.jsxs)(e.h3,{id:"题意-2",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#题意-2",children:"#"}),"题意"]}),"\n",(0,a.jsx)(e.p,{children:"在 V 型数组，找一个平均值最大的连续子数组，要求子数组也成 V 型，输出平均值。"}),"\n",(0,a.jsxs)(e.h3,{id:"思路-2",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#思路-2",children:"#"}),"思路"]}),"\n",(0,a.jsxs)(e.p,{children:["从最低点（",(0,a.jsx)(e.code,{children:"pi"}),"）分别向左向右找到平均值最大的位置（",(0,a.jsx)(e.code,{children:"lp"}),"，",(0,a.jsx)(e.code,{children:"rp"}),"），选择区间",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mi,{children:"l"}),(0,a.jsx)(e.mi,{children:"p"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mi,{children:"p"}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mo,{children:"+"}),(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"[lp,pi+1]"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"lp"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"p"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"+"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsx)(e.span,{className:"mclose",children:"]"})]})]})]}),"、",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mi,{children:"p"}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mo,{children:"−"}),(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mi,{children:"p"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"[pi-1,rp]"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"p"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"−"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"p"}),(0,a.jsx)(e.span,{className:"mclose",children:"]"})]})]})]}),"、",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mi,{children:"l"}),(0,a.jsx)(e.mi,{children:"p"}),(0,a.jsx)(e.mo,{separator:"true",children:","}),(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mi,{children:"p"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"[lp,rp]"})]})})}),(0,a.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"lp"}),(0,a.jsx)(e.span,{className:"mpunct",children:","}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"p"}),(0,a.jsx)(e.span,{className:"mclose",children:"]"})]})})]}),"之中平均值最大的一个。"]}),"\n",(0,a.jsxs)(e.h3,{id:"代码-2",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#代码-2",children:"#"}),"代码"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-cpp",children:"const int maxn = 3e5 + 50;\nll a[maxn], pre[maxn];\n\nvoid solve() {\n  ll n;\n  cin >> n;\n  ll lp, rp, pi, mna = inf;\n  for (ll i = 1; i <= n; i++) {\n    cin >> a[i];\n    pre[i] = pre[i - 1] + a[i];\n    if (mna > a[i]) {\n      pi = lp = rp = i;\n      mna = a[i];\n    }\n  }\n  ll sum = 0, len = 0, llp = lp, rrp = rp;\n  ld rcur = 0.0, lcur = 0.0;\n  while (lp >= 1) {\n    sum += a[lp];\n    len++;\n    if (1.0 * sum / len > lcur) {\n      lcur = 1.0 * sum / len;\n      llp = lp;\n    }\n    lp -= 1;\n  }\n  sum = 0, len = 0;\n  while (rp <= n) {\n    sum += a[rp];\n    len++;\n    if (1.0 * sum / len > rcur) {\n      rcur = 1.0 * sum / len;\n      rrp = rp;\n    }\n    rp += 1;\n  }\n\n  auto getavl = [&](ll r, ll l) {\n    return 1.0 * (pre[r] - pre[l - 1]) / (r - l + 1);\n  };\n\n  ld ans = max(getavl(rrp, pi - 1), getavl(pi + 1, llp));\n  ans = max(ans, getavl(rrp, llp));\n  cout << fixed << setprecision(12) << ans << '\\n';\n}\n"})})]})}function r(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,l.ah)(),s.components);return e?(0,a.jsx)(e,Object.assign({},s,{children:(0,a.jsx)(t,s)})):t(s)}let m=r;r.__RSPRESS_PAGE_META={},r.__RSPRESS_PAGE_META["posts%2Falgorithm%2F23HangZhouICPC.md"]={toc:[{id:"g-snake-move",text:"G. Snake Move",depth:2},{id:"题意",text:"题意",depth:3},{id:"思路",text:"思路",depth:3},{id:"代码",text:"代码",depth:3},{id:"j-mysterious-tree",text:"J. Mysterious Tree",depth:2},{id:"题意-1",text:"题意",depth:3},{id:"思路-1",text:"思路",depth:3},{id:"代码-1",text:"代码",depth:3},{id:"m-v-diagram",text:"M. V-Diagram",depth:2},{id:"题意-2",text:"题意",depth:3},{id:"思路-2",text:"思路",depth:3},{id:"代码-2",text:"代码",depth:3}],title:"2023杭州ICPC区域赛",headingTitle:"",frontmatter:{title:"2023杭州ICPC区域赛",subtitle:"",date:"2024-11-23T10:51:44.000Z",lastmod:"2024-11-23T10:51:44.000Z",draft:!1,authors:null,description:"",tags:["算法"],categories:["在学算法的日子里"],series:["题解记录"],hiddenFromHomePage:!1,hiddenFromSearch:!1,featuredImage:"https://img.dodolalorc.cn/i/2024/12/10/67580b0b426f5.jpg",featuredImagePreview:"https://img.dodolalorc.cn/i/2024/12/10/67580b0b426f5.jpg",toc:{enable:!0},math:{enable:!0},lightgallery:!1,license:""}}},5523:function(s,e,n){n.d(e,{Z:()=>m});var a=n(2676),l=n(5271),i=n(2815);n(7995);let t={"zh-CN":s=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${s.minutes>=1?`${Math.ceil(s.minutes)} \u{5206}\u{949F}`:"小于 1 分钟"}`,"en-US":s=>`Estimated reading time: ${s.minutes>=1?`${Math.ceil(s.minutes)} minutes`:"less than 1 minute"}`};function r(s,e,n){let a=Object.keys(t).includes(e)?e:n;return t[a](s)}let m=s=>{let{defaultLocale:e="en-US"}=s,n=(0,i.Vi)().page.readingTimeData,t=(0,i.Jr)(),m=(0,i.e7)(),[c,h]=(0,l.useState)(r(n,t,e));return(0,l.useEffect)(()=>{h(r(n,t,e))},[t,n]),(0,a.jsx)("span",{"data-dark":String(m),className:"rp-reading-time",children:c})}}}]);