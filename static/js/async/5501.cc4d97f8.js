"use strict";(self.webpackChunkblogsite_rspress=self.webpackChunkblogsite_rspress||[]).push([["5501"],{8417:function(e,n,r){r.r(n),r.d(n,{default:()=>l});var s=r(2676),o=r(453),d=r(3208);function i(e){let n=Object.assign({blockquote:"blockquote",p:"p",h2:"h2",a:"a",code:"code",h3:"h3",h4:"h4",pre:"pre",img:"img"},(0,o.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"System：Windows 11"}),"\n",(0,s.jsx)(n.p,{children:"Python：Python 3.13.3"}),"\n",(0,s.jsx)(n.p,{children:"node：v22.14.0"}),"\n",(0,s.jsx)(n.p,{children:"npm：10.9.2"}),"\n",(0,s.jsx)(n.p,{children:"yarn：1.22.22"}),"\n",(0,s.jsx)(n.p,{children:"足够的磁盘空间和流量"}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"初始化环境",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#初始化环境",children:"#"}),"初始化环境"]}),"\n",(0,s.jsx)(d.Z,{defaultLocale:"zh-CN"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Electron"}),"\xa0 是嵌入 \xa0",(0,s.jsx)(n.a,{href:"https://www.chromium.org/",rel:"noopener noreferrer",target:"_blank",children:"Chromium"}),"\xa0 和 \xa0",(0,s.jsx)(n.a,{href:"https://nodejs.org/",rel:"noopener noreferrer",target:"_blank",children:"Node.js"}),"\xa0 到 二进制进行开发，所以在构建",(0,s.jsx)(n.code,{children:"Electron"}),"时显然也要准备这两者的开发环境。"]}),"\n",(0,s.jsxs)(n.h3,{id:"chromium-开发工具",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#chromium-开发工具",children:"#"}),"Chromium 开发工具"]}),"\n",(0,s.jsxs)(n.p,{children:["参考",(0,s.jsx)(n.a,{href:"https://chromium.googlesource.com/chromium/tools/depot_tools.git",rel:"noopener noreferrer",target:"_blank",children:"Chromium 此页"}),"拉取",(0,s.jsx)(n.code,{children:"depot_tools"}),"。"]}),"\n",(0,s.jsxs)(n.p,{children:["拉取完毕之后，将",(0,s.jsx)(n.code,{children:"depot_tools"}),"的路径加入到系统变量",(0,s.jsx)(n.code,{children:"path"}),"中，并将变量位置上移到至少",(0,s.jsx)(n.code,{children:"git"}),"变量之前。"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"depot_tools"}),"需要本机安装了",(0,s.jsx)(n.code,{children:"Git for Windows"}),"，以及",(0,s.jsx)(n.code,{children:"python 3.8"}),"。"]}),"\n",(0,s.jsxs)(n.h4,{id:"识别不到安装的git",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#识别不到安装的git",children:"#"}),"识别不到安装的",(0,s.jsx)(n.code,{children:"git"})]}),"\n",(0,s.jsx)(n.p,{children:"报错信息："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ gclient --version\nUpdating depot_tools...\nWARNING:root:depot_tools will stop bundling Git for Windows on 2025-01-27.\nTo prepare for this change, please install Git directly. See\nhttps://chromium.googlesource.com/chromium/src/+/main/docs/windows_build_instructions.md#Install-git\n\nHaving issues and not ready for depot_tools to stop bundling\nGit for Windows? File a bug at:\nhttps://issues.chromium.org/issues/new?component=1456702&template=2045785\n\nERROR:root:Failed to bootstrap depot_tools.\nGit was not found in PATH. Have you installed it?\n"})}),"\n",(0,s.jsxs)(n.p,{children:["本机使用",(0,s.jsx)(n.a,{href:"https://scoop.sh/",rel:"noopener noreferrer",target:"_blank",children:"Scoop"}),"安装大部分的软件，难过的是通过这样下载的",(0,s.jsx)(n.code,{children:"git"}),"无法被",(0,s.jsx)(n.code,{children:"depot_tools"}),"工具识别，只能卸载本机当前的",(0,s.jsx)(n.code,{children:"git"}),"后在",(0,s.jsx)(n.a,{href:"https://git-scm.com/downloads",rel:"noopener noreferrer",target:"_blank",children:"git"}),"重新下载一遍，之后的",(0,s.jsx)(n.code,{children:"gclient"}),"。"]}),"\n",(0,s.jsxs)(n.h3,{id:"electron-build-tools",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#electron-build-tools",children:"#"}),"Electron build-tools"]}),"\n",(0,s.jsxs)(n.p,{children:["本篇使用的脚本是",(0,s.jsx)(n.a,{href:"https://github.com/electron/build-tools",rel:"noopener noreferrer",target:"_blank",children:"Electron build-tools"}),"。"]}),"\n",(0,s.jsx)(n.p,{children:"按照 readme 的提示安装："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm i -g @electron/build-tools\n"})}),"\n",(0,s.jsx)(n.p,{children:"在本机找好存放源码的位置后，进行："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"e init --root=~/electron --bootstrap testing\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"--root=~/electron"}),"是拉取的时候想要存源码的位置，如果留空则在当前路径下，建议选择合适的磁盘，至少光是源码已经占据 20 多个 G 了，考虑到之后还有依赖包。"]}),"\n",(0,s.jsxs)(n.h4,{id:"识别不到命令",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#识别不到命令",children:"#"}),"识别不到命令"]}),"\n",(0,s.jsxs)(n.p,{children:["在",(0,s.jsx)(n.code,{children:"e init ..."}),"命令执行到一半，发现中断在某处，重新进行",(0,s.jsx)(n.code,{children:"e sync -f"}),"后，出现找不到 npm 命令的反馈。"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ e sync -f\nChecking for build-tools updates\n'npm' 不是内部或外部命令，也不是可运行的程序或批处理文件\n'npx' 不是内部或外部命令，也不是可运行的程序或批处理文件\n"})}),"\n",(0,s.jsxs)(n.p,{children:["进行拉取时，脚本在执行到大约",(0,s.jsx)(n.code,{children:"python script/lib/npx.py yarn@1.15.2 install --frozen-lockfile"}),"的时候发生了报错，称",(0,s.jsx)(n.code,{children:"FileNotFoundError: [WinError 2]"}),"，导致",(0,s.jsx)(n.code,{children:"ERROR gclient sync failed"}),"失败。"]}),"\n",(0,s.jsxs)(n.p,{children:["仔细阅读日志之后，先在命令行直接执行上述脚本语句，发现运行是正常的，同时想的本机在平时开发使用 python、node.js 均没有出现找不到命令的问题，且实验当时在命令行测试",(0,s.jsx)(n.code,{children:"node -v"}),"、",(0,s.jsx)(n.code,{children:"yarn --version"}),"和",(0,s.jsx)(n.code,{children:"npm -v"}),"都有版本返回，排错查看环境变量",(0,s.jsx)(n.code,{children:"path"}),"也有正确设置。"]}),"\n",(0,s.jsxs)(n.p,{children:["本机使用了 node.js 版本管理工具",(0,s.jsx)(n.code,{children:"fnm"}),"，继而想到或许需要激活 node 环境，于是先运行了",(0,s.jsx)(n.code,{children:"fnm use v22"}),"，发现继续的拉取依然有问题，想到或许是通过",(0,s.jsx)(n.code,{children:"fnm"}),"设置的临时环境会不被识别，于是选择直接在 ",(0,s.jsx)(n.a,{href:"https://nodejs.org/en",rel:"noopener noreferrer",target:"_blank",children:"node.js"})," 官网下载一个合适的版本，这样操作之后能成功运行完毕。"]}),"\n",(0,s.jsxs)(n.p,{children:["不太确定",(0,s.jsx)(n.code,{children:"nvm"}),"会不会也有这样的问题，但是插个眼，解决方法还是比较简单的。"]}),"\n",(0,s.jsxs)(n.h2,{id:"构建",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#构建",children:"#"}),"构建"]}),"\n",(0,s.jsx)(n.p,{children:"附一张成功拉取的截图(嘻嘻)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://img.dodolalorc.cn/i/2025/04/26/680c5ddac8c6d.png",alt:"image.png"})}),"\n",(0,s.jsxs)(n.p,{children:["在进行",(0,s.jsx)(n.code,{children:"e build"}),"之后，初次构建需要鉴权，点击命令行提示的网址操作一下就好啦~"]}),"\n",(0,s.jsx)(n.p,{children:"然后就是继续泡 n 杯咖啡等待构建。"}),"\n",(0,s.jsxs)(n.p,{children:["构建成功之后的结果会存在",(0,s.jsx)(n.code,{children:"./src/out/.."}),"目录下，在命令行执行："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"e start\n"})}),"\n",(0,s.jsxs)(n.p,{children:["可以在命令行看到当前构建出的",(0,s.jsx)(n.code,{children:"Electron"}),"信息，以及弹出的窗口。"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://img.dodolalorc.cn/i/2025/04/27/680dd921a3158.png",alt:"image.png"})}),"\n",(0,s.jsx)(n.p,{children:"根据提示的命令启动本地的 electron demo"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://img.dodolalorc.cn/i/2025/04/27/680dd96b91c23.png",alt:"50d9f84772570dea5e3f8dd6c1fd2dd2.png"})}),"\n",(0,s.jsx)(n.p,{children:"合影\uD83D\uDE17"})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,s.jsx)(n,Object.assign({},e,{children:(0,s.jsx)(i,e)})):i(e)}let l=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["posts%2Felectronjs%2Fbuild_electron.md"]={toc:[{id:"初始化环境",text:"初始化环境",depth:2},{id:"chromium-开发工具",text:"Chromium 开发工具",depth:3},{id:"识别不到安装的git",text:"识别不到安装的`git`",depth:4},{id:"electron-build-tools",text:"Electron build-tools",depth:3},{id:"识别不到命令",text:"识别不到命令",depth:4},{id:"构建",text:"构建",depth:2}],title:"Electron 构建记录",headingTitle:"",frontmatter:{title:"Electron 构建记录",subtitle:null,date:"2025-04-25T05:27:50.000Z",lastmod:"2025-04-25T05:27:50.000Z",draft:!1,authors:null,description:"Electron 构建记录，排错记录流水账",tags:["Electron","Chromium"],categories:["在前端搬砖的日子里"],series:["Electron学习笔记"],hiddenFromHomePage:!1,hiddenFromSearch:!1,featuredImage:"https://img.dodolalorc.cn/i/2025/04/26/680c60755e10f.png",featuredImagePreview:"https://img.dodolalorc.cn/i/2025/04/26/680c60755e10f.png",toc:{enable:!0},math:{enable:!0},lightgallery:!1,license:""}}},3208:function(e,n,r){r.d(n,{Z:()=>l});var s=r(2676),o=r(5271),d=r(2815);r(2791);let i={"zh-CN":e=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${e.minutes>=1?`${Math.ceil(e.minutes)} \u{5206}\u{949F}`:"小于 1 分钟"}`,"en-US":e=>`Estimated reading time: ${e.minutes>=1?`${Math.ceil(e.minutes)} minutes`:"less than 1 minute"}`};function t(e,n,r){let s=Object.keys(i).includes(n)?n:r;return i[s](e)}let l=e=>{let{defaultLocale:n="en-US"}=e,r=(0,d.Vi)().page.readingTimeData,i=(0,d.Jr)(),l=(0,d.e7)(),[c,h]=(0,o.useState)(t(r,i,n));return(0,o.useEffect)(()=>{h(t(r,i,n))},[i,r]),(0,s.jsx)("span",{"data-dark":String(l),className:"rp-reading-time",children:c})}}}]);